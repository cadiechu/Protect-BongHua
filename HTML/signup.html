<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Đăng ký</title>
    <!-- CSS -->
    <link rel="stylesheet" href="../btn/btn.css">
    <link rel="stylesheet" href="../CSS/index.css">
    <!-- Favicon -->
    <link rel="shortcut icon" href="../MEDIA/favicon-bonghoa.png" type="image/x-icon">
    <!-- Icon & Symbol & Font Google -->
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Calistoga&family=Paytone+One&family=Sigmar+One&display=swap');
    </style>
    <link rel="stylesheet"
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
</head>

<body class="body_image">
    <!-- Header -->
    <header>
        <nav class=" header__container--navbar">
            <div class="header">
                <div>
                    <a href="../index.html"><img src="../MEDIA/Daisy2.png" alt="" id="headerlogo"
                            class="header__logo"></a>
                </div>
                <div class="navbar_menu">
                    <ul>
                        <li>
                            <a href="../index.html"><button class="rainbow rainbow-1">Trang chủ</button></a>
                        </li>
                        <li class="dropdown dropdown__cart ">
                            <a href="#"><button class="rainbow rainbow-1 dropbtn"> Sản phẩm
                                </button>
                                <div class="dropdown-content">
                                    <a href="../HTML/gift.html">Hoa tặng ngày lễ</a>
                                    <a href="../HTML/congratulation.html">Hoa chúc mừng</a>
                                    <a href="../HTML/display.html">Hoa tiền & giỏ quà</a>
                                    <a href="../HTML/sadness.html">Hoa chia buồn</a>
                                </div>
                            </a>
                        </li>
                        <li class="dropdown">
                            <a href="#"><button class="rainbow rainbow-1 dropbtn">Dịch vụ</button>
                                <div class="dropdown-content">
                                    <a href="../HTML/decord.html">Trang trí theo sự kiện</a>
                                    <a href="../HTML/request.html">Hoa theo yêu cầu</a>
                                    <a href="../HTML/plant.HTML">Cây cảnh</a>
                                </div>
                            </a>
                        </li>
                        <li>
                            <a href="../HTML/flowermain.html"><button class="rainbow rainbow-1 ">Ý
                                    nghĩa bông
                                    hoa</button>
                            </a>
                        </li>
                        <li>
                            <a href="../HTML/login.html"><button class="rainbow rainbow-1 dropbtn ">Login</button></a>
                        </li>
                    </ul>
                </div>
                <div>

                </div>
            </div>
        </nav>
    </header>

    <!-- Header End -->
    <!-- Form Login -->
    <div class="form__login--signup">
        <form action="">
            <h1>Đăng ký tài khoản</h1>
            <div class="form__info">
                <div class="form__detail">
                    <label for="username">Tên đăng nhập:</label> <br>
                    <input type="text" id="username" placeholder="Nhập tên đăng nhập">
                </div>
                <div class="form__detail">
                    <label for="password">Mật khẩu:</label> <br>
                    <input type="password" id="password" placeholder="Nhập mật khẩu ít nhất 8 kí tự">
                </div>
                <div class="form__detail">
                    <label for="confirmpassword">Xác nhận mật khẩu:</label> <br>
                    <input type="password" id="confirmpassword" placeholder="Nhập lại mật khẩu">
                </div>
                <div class="form__detail">
                    <label for="email">Email:</label> <br>
                    <input type="email" id="email" placeholder="Nhập Email của bạn">
                </div>
                <button onclick="getSignup(event)" class="login__btn rainbow rainbow-4 ">Đăng ký</button>
            </div>
            <div class="form__signup">
                <p>Bạn đã có tài khoản rồi, hãy nhấn
                    <a class="rainbow-4 " href="./login.html">
                        Đăng nhập
                    </a>
                    để tiếp tục mua hàng nè.
                </p>
            </div>
        </form>
    </div>

    <script>
        function createId() {
            return Math.floor(Math.random() * 9999999999999 + new Date().getMilliseconds())
        }
        let users = JSON.parse(localStorage.getItem("users")) || [];
        function getSignup(e) {
            e.preventDefault();
            let username = document.getElementById("username").value;
            let password = document.getElementById("password").value;
            let confirmpassword = document.getElementById("confirmpassword").value;
            let email = document.getElementById("email").value;
            if (password != confirmpassword || password.length < 8) {
                console.log("Xác nhận mật khẩu không khớp hoặc mật khẩu không đủ 8 ký tự!");
                return;
            }
            console.log(111);
            let userInfor = {
                username: username,
                email: email,
                password: password,
                cart: [],
                idUser: createId()
            }
            let checkSignup = users.find((item) => {
                return item.username == username;
            })
            if (checkSignup) {
                console.log("tài khoản đã tồn tại!");

                return;
            }
            users.push(userInfor);
            console.log("đăng kí thành công!");
            localStorage.setItem("users", JSON.stringify(users));
            window.location.href = "../html/login.html";
        } 
    </script>

</body>

</html>